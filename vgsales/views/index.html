
<html>
<head>
	<title>Index</title>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
      	google.charts.load('current', {'packages':['corechart']});
      	google.charts.setOnLoadCallback(drawSeriesChart);
      	var tempData= [];
      	function drawSeriesChart() {
	        var chartData = [];
	        $(function(){
	          	$.ajax({
		          	url: 'http://localhost:3000/sales',
		          	type: 'GET',
		          	success : function(data) {
		            	chartData = data;
		            	console.log("Loaded Data");
		            	console.log(chartData);
						tempData.push(['ID','Genre','Year','Global Sales']);
				 		for (var i = 0; i < chartData.length; i++){
				 			var array = [];

				 			array.push(chartData[i].value["global_sales"]);
				 			array.push(chartData[i]._id["genre"]);
				 			array.push(chartData[i]._id["year"]);
				 			array.push(chartData[i].value["publisher"]);
				 			tempData.push(array);

				 		}
				 		console.dir(tempData);
							var data = google.visualization.arrayToDataTable(tempData);

				      		var options = {
				        		title: 'Correlation between life expectancy, fertility rate ' +
				               	'and population of some world countries (2010)',
				        		hAxis: {title: 'Year'},
				        		vAxis: {title: 'Global Sales'},
				        		bubble: {textStyle: {fontSize: 11}}
				      		};
							var chart = new google.visualization.BubbleChart(document.getElementById('series_chart_div'));
				      		chart.draw(data, options);
				
					}
					
	      		});
	  		});
        }
   
    	
    	
      

      
      
      
    
    </script>
  </head>
<body>
	
	<div id="series_chart_div" style="width: 900px; height: 500px;"></div>
	<script src="http://code.jquery.com/jquery-2.1.4.min.js" charset="utf-8"></script>


	<script type="text/javascript">
		
		  
	</script>

</body>
</html>


